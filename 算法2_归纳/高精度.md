<div align=center><font size=8>高精度</font></div>

[TOC]

##### 作用

模拟实现大数字**加法**与**乘法**

##### 算法思路

实现c = a + b, c = a * b

**加法：**将数字a存放在int [], 数字b放在int [], 注意**权重大的放在数组的右边** 

列如：a = 1234,  int a[] = {4, 3, 2, 1}。

进行下面的操作：

```c++
c[i] = a[i] + b[i]
c[i + 1] += c[i] / 10
c[i] %= 10
```

**乘法：**将数字a存放在int [], 数字b放在int []

进行下面操作

```c++
c[i + j - 1] += a[i] * b[j]
c[i + 1] += c[i] / 10				// 注意为 +=
c[i] %= 10
```

##### 题目题解

###### Luogu 1601

第四个测试样例为0 + 0，在后面处理时第40行注意应该为 `max(len, 1)`

```c++
// 高精度加法
#include <iostream>
using namespace std;
const int maxL = 550;
int a[maxL];
int b[maxL];
int c[maxL];
int main() {
    ios::sync_with_stdio(false);
    cin.tie(0), cout.tie(0);
    string A, B;
    cin >> A >> B;
    int LenA = A.size(), LenB = B.size();
    for(int i = 1; i <= LenA; i++) {
        a[i] = A[LenA - i] - '0';
    }


    for(int j = 1; j <= LenB; j++) {
        b[j] = B[LenB - j] - '0';
    }


    int len = max(A.size(), B.size()) + 1;
    for(int i = 1; i <= len; i++) {
        c[i] = a[i] + b[i];
    }

    // 处理进位
    for(int i = 1; i <= len; i++) {
        c[i + 1] += c[i] / 10;
        c[i] %= 10;
    }

    // 处理空缺0
    for(;c[len] == 0 ;) {
        len--;
    }

    for (int i = max(len, 1); i >= 1; i--) {
        cout << c[i];
    }

    return 0;
}
```

###### Luogu 1303

第24行注意为 `+=`

```c++
#include <iostream>
using namespace std;
const int maxL = 2050;
int a[maxL];
int b[maxL];
int c[2 * maxL];
int main() {
    ios::sync_with_stdio(false);
    cout.tie(0), cin.tie(0);
    string A, B;
    cin >> A >> B;
    // 将string转为int [], int [] 的右边为高位
    int LenA = A.size(), LenB = B.size();
    for(int i = 1; i <= LenA; i++) {
        a[i] = A[LenA - i] - '0';
    }

    for(int i = 1; i <= LenB; i++) {
        b[i] = B[LenB - i] - '0';
    }
    int len = LenA + LenB;
    for(int i = 1; i <= LenA; i++) {
        for(int j = 1; j <= LenB; j++) {
            c[i + j - 1] += a[i] * b[j];
        }
    }
    // 进位
    for (int i = 1; i <= len; i++) {
        c[i + 1] += c[i] / 10;
        c[i] %= 10;
    }

    while(c[len] == 0) {
        len--;
    }

    for(int i = max(len, 1); i >= 1; i--) {
        cout << c[i];
    }
    
    return 0;
}
```

###### Luogu1591

注意：将<u>输入先存储，在逐个计算输出</u>，与 <u>读入一组输入，处理输出一组都可以</u>

```c++
#include <iostream>
#include <cstring>
using namespace std;
// 设计一个结构体方便实现大数字的加减
const int maxL = 12600;
int n[11];
int a[11];
struct Bigint {
    int a[maxL];
    int len;
    Bigint(int x = 0);
    int& operator[](int i);
    Bigint operator+ (Bigint x);
    Bigint operator* (int x);
    void print();
    void answer(int target);
};
void Bigint::answer(int target) {
    int count = 0;
    for(int i = 1; i <= max(len, 1); i++) {
        if(a[i] == target) {
            count++;
        }
    }
    cout << count;
}
void Bigint::print() {
    for(int i = max(len, 1); i >= 1; i--) {
        cout << a[i] << " ";
    }
}
int& Bigint::operator[](int i) {
    return a[i];
}

Bigint::Bigint(int x) {
    // 初始化Bigint, 同时统计位数
    memset(a, 0, sizeof(a));
    len = 1;
    while(x != 0) {
        a[len] = x % 10;
        x /= 10;
        len++;
    }
    len--;
}

Bigint Bigint::operator+(Bigint x) {
    Bigint c(0);
    c.len = max(len, x.len) + 1;
    for(int i = 1; i <= len; i++) {
        c[i] = a[i] + x[i];
    }
 
    // 处理进位
    for(int i = 1; i <= len; i++) {
        c[i + 1] += c[i] / 10;
        c[i] %= 10;
    }
    // 除去前置位的0
    for(;c[c.len] == 0;) {
        c.len--;
    }

    return c;
}

Bigint Bigint::operator*(int x) {
    Bigint c(0);
    c.len = len;
    for(int i = 1; i <= len; i++) {
        c[i] += x * a[i];            // x * a[i] < int_max
    }

    // 处理进位
    c.len += 11;                        // 11 为 int的最大长度，其实取3即可
    // 注意c.len
    for(int i = 1; i <= c.len; i++) {
        c[i + 1] += c[i] / 10;
        c[i] %= 10; 
    }

    // 消去0
    for(;c[c.len] == 0;) {
        c.len--;
    }
    return c;
}


int main() {
    Bigint ans(0), fac(1);
    int cnt = 0;
    cin >> cnt;
    /*
    for(int i = 0; i < cnt; i++) {
        int n = 0, a = 0;
        Bigint c(1);
        cin >> n >> a;
        for(int i = 1; i <= n; i++) {
            c = c * i;
        }
        c.answer(a);
        cout << endl;
    }*/
    for(int i = 0; i < cnt; i++) {
        cin >> n[i] >> a[i];
    }

    for(int i = 0; i < cnt; i++) {
        Bigint c(1);
        for(int j = 1; j <= n[i]; j++) {
            c = c * j;
        }
        c.answer(a[i]);   
        cout << endl;
    }
    return 0;
}
```

###### Luogu1249

**贪心策略：**对于**大于4**的数字`n`构造一组从二开始的连续数字作为分割的和记为`nums[0] = 2, nums[1] = 3,……, nums[i] = i + 2`, 对于最后一个数字`m = n - (2 + 3 +……+ i + 2) < i + 3`，将m从后向前分给每个数字1，遍历完后如果还剩下1（m = i + 2），加到最后一个数字。

```c++
// 贪心做法
#include <iostream>
#include <vector>
#include <cstring>
using namespace std;
int n;
int nums[10050];
struct Bigint {
    int a[10000];
    int len;
    Bigint(int x = 1);
    void print();
    Bigint operator*(int x);
};
void Bigint::print() {
    for(int i = max(len, 1); i >= 1; i--) {
        cout << a[i];
    }
}
Bigint::Bigint(int x) {
    memset(a, 0, sizeof(a));
    a[1] = 1;
    len = 1;
}
Bigint Bigint::operator*(int x) {
    Bigint c(1);
    c.len = len + 11;
    for(int i = 1; i <= len; i++) {
        c.a[i] = a[i] * x;
    }
    // 处理进位
    for(int i = 1; i <= c.len; i++) {
        c.a[i + 1] += c.a[i] / 10;
        c.a[i] %= 10;
    }
    // 处理空格
    for(;c.a[c.len] == 0;) {
        c.len--;
    }
    return c;
}

int main() {

    cin >> n;
    if(n == 3) {
        cout << "1 2" << endl;
        cout << 2 << endl; 
    }
    else if(n == 4) {
        cout << "1 3" << endl;
        cout << "3" << endl;
    }
    else {
        int index = 0;
        int sum = 0;
        for(int i = 2; ; i++) {
            sum += i;
            if(sum > n) {
                sum -= i;
                break;
            }
            nums[index++] = i;
        }

        // 处理剩下的值
        sum = n - sum;
        
        for(int i = index - 1; sum > 0 && i >= 0; i--, sum--) {
            nums[i]++;
        }
        if(sum == 1) {
            nums[index - 1]++;
        }

        for(int i = 0; i < index; i++) {
            cout << nums[i] << " ";
        }
        cout << endl;

        // 求积
        Bigint c(1);
        for(int i = 0; i < index; i++) {
            c = c * nums[i];
        }
        c.print();
        
    }
    return 0;
}
```

